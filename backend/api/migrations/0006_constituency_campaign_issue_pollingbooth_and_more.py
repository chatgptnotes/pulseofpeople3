# Generated by Django 5.2.7 on 2025-11-13 05:47

import django.core.validators
import django.db.models.deletion
from decimal import Decimal
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('api', '0005_uploadedfile'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Constituency',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(db_index=True, max_length=50, unique=True)),
                ('type', models.CharField(choices=[('parliamentary', 'Parliamentary'), ('assembly', 'Assembly'), ('municipal', 'Municipal'), ('other', 'Other')], default='assembly', max_length=20)),
                ('state', models.CharField(max_length=100)),
                ('district', models.CharField(max_length=100)),
                ('boundaries', models.JSONField(blank=True, default=dict, help_text='GeoJSON boundaries')),
                ('population', models.IntegerField(blank=True, null=True)),
                ('voter_count', models.IntegerField(default=0)),
                ('total_booths', models.IntegerField(default=0)),
                ('area_sq_km', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('reserved_category', models.CharField(choices=[('general', 'General'), ('sc', 'Scheduled Caste'), ('st', 'Scheduled Tribe'), ('obc', 'Other Backward Class')], default='general', max_length=20)),
                ('last_election_year', models.IntegerField(blank=True, null=True)),
                ('current_representative', models.CharField(blank=True, max_length=200)),
                ('current_party', models.CharField(blank=True, max_length=100)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('organization', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='constituencies', to='api.organization')),
            ],
            options={
                'verbose_name': 'Constituency',
                'verbose_name_plural': 'Constituencies',
                'ordering': ['state', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Campaign',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('planning', 'Planning'), ('active', 'Active'), ('paused', 'Paused'), ('completed', 'Completed'), ('cancelled', 'Cancelled')], default='planning', max_length=20)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('target_voters', models.IntegerField(default=0)),
                ('reached_voters', models.IntegerField(default=0)),
                ('budget', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('spent', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=12)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('manager', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='managed_campaigns', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='campaigns', to='api.organization')),
                ('constituency', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='campaigns', to='api.constituency')),
            ],
            options={
                'verbose_name': 'Campaign',
                'verbose_name_plural': 'Campaigns',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='Issue',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('category', models.CharField(choices=[('infrastructure', 'Infrastructure'), ('education', 'Education'), ('healthcare', 'Healthcare'), ('employment', 'Employment'), ('law_order', 'Law & Order'), ('agriculture', 'Agriculture'), ('environment', 'Environment'), ('corruption', 'Corruption'), ('other', 'Other')], default='other', max_length=30)),
                ('priority', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('critical', 'Critical')], default='medium', max_length=20)),
                ('status', models.CharField(choices=[('open', 'Open'), ('in_progress', 'In Progress'), ('resolved', 'Resolved'), ('closed', 'Closed')], default='open', max_length=20)),
                ('affected_voters', models.IntegerField(default=0)),
                ('sentiment_impact', models.DecimalField(decimal_places=2, default=Decimal('0.00'), max_digits=4, validators=[django.core.validators.MinValueValidator(Decimal('-1.00')), django.core.validators.MaxValueValidator(Decimal('1.00'))])),
                ('resolution', models.TextField(blank=True)),
                ('resolved_at', models.DateTimeField(blank=True, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_issues', to=settings.AUTH_USER_MODEL)),
                ('constituency', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='issues', to='api.constituency')),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='issues', to='api.organization')),
                ('reported_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reported_issues', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Issue',
                'verbose_name_plural': 'Issues',
                'ordering': ['-priority', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PollingBooth',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(db_index=True, max_length=50)),
                ('booth_number', models.CharField(max_length=50)),
                ('location', models.CharField(blank=True, max_length=300)),
                ('address', models.TextField(blank=True)),
                ('total_voters', models.IntegerField(default=0)),
                ('status', models.CharField(choices=[('active', 'Active'), ('inactive', 'Inactive'), ('needs_attention', 'Needs Attention')], default='active', max_length=20)),
                ('supervisor_id', models.IntegerField(blank=True, help_text='User ID of supervisor', null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('constituency', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='polling_booths', to='api.constituency')),
                ('last_updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='updated_booths', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='polling_booths', to='api.organization')),
            ],
            options={
                'verbose_name': 'Polling Booth',
                'verbose_name_plural': 'Polling Booths',
                'ordering': ['constituency', 'booth_number'],
            },
        ),
        migrations.CreateModel(
            name='CampaignActivity',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('activity_type', models.CharField(choices=[('rally', 'Rally'), ('door_to_door', 'Door to Door'), ('phone_call', 'Phone Call'), ('social_media', 'Social Media'), ('meeting', 'Meeting'), ('event', 'Event'), ('other', 'Other')], default='other', max_length=30)),
                ('scheduled_at', models.DateTimeField()),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('completed', models.BooleanField(default=False)),
                ('voters_reached', models.IntegerField(default=0)),
                ('feedback', models.TextField(blank=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_activities', to=settings.AUTH_USER_MODEL)),
                ('campaign', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='activities', to='api.campaign')),
                ('polling_booth', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='campaign_activities', to='api.pollingbooth')),
            ],
            options={
                'verbose_name': 'Campaign Activity',
                'verbose_name_plural': 'Campaign Activities',
                'ordering': ['-scheduled_at'],
            },
        ),
        migrations.CreateModel(
            name='Voter',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('full_name', models.CharField(max_length=200)),
                ('voter_id_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('epic_number', models.CharField(blank=True, help_text='Electoral Photo ID Card Number', max_length=50)),
                ('phone', models.CharField(blank=True, max_length=20)),
                ('address', models.TextField(blank=True)),
                ('age', models.IntegerField(blank=True, null=True)),
                ('gender', models.CharField(choices=[('male', 'Male'), ('female', 'Female'), ('other', 'Other'), ('undisclosed', 'Undisclosed')], default='undisclosed', max_length=20)),
                ('caste_category', models.CharField(blank=True, choices=[('general', 'General'), ('obc', 'OBC'), ('sc', 'SC'), ('st', 'ST'), ('other', 'Other')], max_length=20)),
                ('religion', models.CharField(blank=True, max_length=50)),
                ('occupation', models.CharField(blank=True, max_length=100)),
                ('education', models.CharField(blank=True, max_length=100)),
                ('family_size', models.IntegerField(blank=True, null=True)),
                ('voter_category', models.CharField(choices=[('core_supporter', 'Core Supporter'), ('swing_voter', 'Swing Voter'), ('opposition', 'Opposition'), ('undecided', 'Undecided'), ('first_time', 'First Time Voter')], default='undecided', max_length=20)),
                ('sentiment', models.CharField(choices=[('strongly_positive', 'Strongly Positive'), ('positive', 'Positive'), ('neutral', 'Neutral'), ('negative', 'Negative'), ('strongly_negative', 'Strongly Negative'), ('undecided', 'Undecided')], default='neutral', max_length=20)),
                ('sentiment_score', models.DecimalField(decimal_places=2, default=Decimal('0.00'), help_text='Score from -1.00 (negative) to +1.00 (positive)', max_digits=4, validators=[django.core.validators.MinValueValidator(Decimal('-1.00')), django.core.validators.MaxValueValidator(Decimal('1.00'))])),
                ('sentiment_last_updated', models.DateTimeField(blank=True, null=True)),
                ('influencer_score', models.IntegerField(default=0, help_text='Influence score 0-100', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('first_time_voter', models.BooleanField(default=False)),
                ('verified', models.BooleanField(default=False)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('consent_given', models.BooleanField(default=False)),
                ('contacted_by_party', models.BooleanField(default=False)),
                ('last_contact_date', models.DateField(blank=True, null=True)),
                ('contact_method', models.CharField(blank=True, max_length=50)),
                ('notes', models.TextField(blank=True)),
                ('tags', models.JSONField(blank=True, default=list, help_text='Array of tags')),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('organization', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='voters', to='api.organization')),
                ('polling_booth', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='voters', to='api.pollingbooth')),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_voters', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Voter',
                'verbose_name_plural': 'Voters',
                'ordering': ['polling_booth', 'full_name'],
            },
        ),
        migrations.CreateModel(
            name='SentimentAnalysis',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('source', models.CharField(choices=[('manual', 'Manual Entry'), ('phone_call', 'Phone Call'), ('social_media', 'Social Media'), ('survey', 'Survey'), ('ai_analysis', 'AI Analysis'), ('field_report', 'Field Report')], default='manual', max_length=30)),
                ('sentiment_score', models.DecimalField(decimal_places=2, help_text='Score from -1.00 (negative) to +1.00 (positive)', max_digits=4, validators=[django.core.validators.MinValueValidator(Decimal('-1.00')), django.core.validators.MaxValueValidator(Decimal('1.00'))])),
                ('confidence', models.DecimalField(decimal_places=2, help_text='Confidence level 0.00 to 1.00', max_digits=4, validators=[django.core.validators.MinValueValidator(Decimal('0.00')), django.core.validators.MaxValueValidator(Decimal('1.00'))])),
                ('text_analyzed', models.TextField(blank=True)),
                ('keywords', models.JSONField(blank=True, default=list)),
                ('emotions', models.JSONField(blank=True, default=dict)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('analyzed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sentiment_analyses', to=settings.AUTH_USER_MODEL)),
                ('constituency', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='sentiment_analyses', to='api.constituency')),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sentiment_analyses', to='api.organization')),
                ('voter', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='sentiment_analyses', to='api.voter')),
            ],
            options={
                'verbose_name': 'Sentiment Analysis',
                'verbose_name_plural': 'Sentiment Analyses',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='VoterInteraction',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('interaction_type', models.CharField(choices=[('phone_call', 'Phone Call'), ('door_visit', 'Door Visit'), ('sms', 'SMS'), ('email', 'Email'), ('whatsapp', 'WhatsApp'), ('social_media', 'Social Media'), ('event', 'Event'), ('rally', 'Rally'), ('other', 'Other')], default='other', max_length=30)),
                ('interaction_date', models.DateTimeField(auto_now_add=True)),
                ('duration_minutes', models.IntegerField(blank=True, null=True)),
                ('subject', models.CharField(blank=True, max_length=200)),
                ('notes', models.TextField(blank=True)),
                ('sentiment_before', models.CharField(blank=True, max_length=20)),
                ('sentiment_after', models.CharField(blank=True, max_length=20)),
                ('successful', models.BooleanField(default=False)),
                ('follow_up_required', models.BooleanField(default=False)),
                ('follow_up_date', models.DateField(blank=True, null=True)),
                ('metadata', models.JSONField(blank=True, default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('campaign', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='voter_interactions', to='api.campaign')),
                ('conducted_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='conducted_interactions', to=settings.AUTH_USER_MODEL)),
                ('voter', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='interactions', to='api.voter')),
            ],
            options={
                'verbose_name': 'Voter Interaction',
                'verbose_name_plural': 'Voter Interactions',
                'ordering': ['-interaction_date'],
            },
        ),
        migrations.AddIndex(
            model_name='constituency',
            index=models.Index(fields=['organization', 'state'], name='api_constit_organiz_811673_idx'),
        ),
        migrations.AddIndex(
            model_name='constituency',
            index=models.Index(fields=['type'], name='api_constit_type_630e56_idx'),
        ),
        migrations.AddIndex(
            model_name='constituency',
            index=models.Index(fields=['code'], name='api_constit_code_7bc4ed_idx'),
        ),
        migrations.AddIndex(
            model_name='campaign',
            index=models.Index(fields=['organization', 'status'], name='api_campaig_organiz_a7c4ea_idx'),
        ),
        migrations.AddIndex(
            model_name='campaign',
            index=models.Index(fields=['constituency'], name='api_campaig_constit_644223_idx'),
        ),
        migrations.AddIndex(
            model_name='campaign',
            index=models.Index(fields=['-start_date'], name='api_campaig_start_d_722413_idx'),
        ),
        migrations.AddIndex(
            model_name='issue',
            index=models.Index(fields=['organization', 'status'], name='api_issue_organiz_d2c67c_idx'),
        ),
        migrations.AddIndex(
            model_name='issue',
            index=models.Index(fields=['constituency', 'category'], name='api_issue_constit_8fe4f5_idx'),
        ),
        migrations.AddIndex(
            model_name='issue',
            index=models.Index(fields=['priority'], name='api_issue_priorit_e1f54a_idx'),
        ),
        migrations.AddIndex(
            model_name='pollingbooth',
            index=models.Index(fields=['constituency', 'status'], name='api_polling_constit_2f8106_idx'),
        ),
        migrations.AddIndex(
            model_name='pollingbooth',
            index=models.Index(fields=['code'], name='api_polling_code_803504_idx'),
        ),
        migrations.AddIndex(
            model_name='pollingbooth',
            index=models.Index(fields=['organization'], name='api_polling_organiz_903752_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='pollingbooth',
            unique_together={('constituency', 'code')},
        ),
        migrations.AddIndex(
            model_name='campaignactivity',
            index=models.Index(fields=['campaign', 'completed'], name='api_campaig_campaig_ecb9de_idx'),
        ),
        migrations.AddIndex(
            model_name='campaignactivity',
            index=models.Index(fields=['-scheduled_at'], name='api_campaig_schedul_43708b_idx'),
        ),
        migrations.AddIndex(
            model_name='voter',
            index=models.Index(fields=['polling_booth', 'voter_category'], name='api_voter_polling_cb24ad_idx'),
        ),
        migrations.AddIndex(
            model_name='voter',
            index=models.Index(fields=['organization', 'sentiment'], name='api_voter_organiz_175841_idx'),
        ),
        migrations.AddIndex(
            model_name='voter',
            index=models.Index(fields=['voter_id_number'], name='api_voter_voter_i_af3670_idx'),
        ),
        migrations.AddIndex(
            model_name='voter',
            index=models.Index(fields=['sentiment', 'sentiment_score'], name='api_voter_sentime_06b7b5_idx'),
        ),
        migrations.AddIndex(
            model_name='voter',
            index=models.Index(fields=['first_time_voter'], name='api_voter_first_t_f676e2_idx'),
        ),
        migrations.AddIndex(
            model_name='sentimentanalysis',
            index=models.Index(fields=['voter', '-created_at'], name='api_sentime_voter_i_8e887a_idx'),
        ),
        migrations.AddIndex(
            model_name='sentimentanalysis',
            index=models.Index(fields=['constituency', '-created_at'], name='api_sentime_constit_e7173e_idx'),
        ),
        migrations.AddIndex(
            model_name='sentimentanalysis',
            index=models.Index(fields=['organization', 'source'], name='api_sentime_organiz_6371ea_idx'),
        ),
        migrations.AddIndex(
            model_name='voterinteraction',
            index=models.Index(fields=['voter', '-interaction_date'], name='api_voterin_voter_i_6091f4_idx'),
        ),
        migrations.AddIndex(
            model_name='voterinteraction',
            index=models.Index(fields=['campaign'], name='api_voterin_campaig_817995_idx'),
        ),
        migrations.AddIndex(
            model_name='voterinteraction',
            index=models.Index(fields=['interaction_type'], name='api_voterin_interac_1651dc_idx'),
        ),
    ]
